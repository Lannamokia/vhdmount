<Window x:Class="UpdatePackagerGUI.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Update Packager" Height="520" Width="800">
    <Grid Margin="12">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="8"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="8"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <GroupBox Header="密钥生成" Grid.Row="0">
            <Grid Margin="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <TextBlock Text="输出目录" VerticalAlignment="Center"/>
                <TextBox x:Name="KeyOutDir" Grid.Column="1" Margin="8,0"/>
                <Button Grid.Column="2" Content="浏览" Padding="12,2" Click="BrowseFolderKeyOut"/>
                <TextBlock Grid.Row="2" Text="KeyId" VerticalAlignment="Center"/>
                <TextBox x:Name="KeyIdBox" Grid.Row="2" Grid.Column="1" Margin="8,0" Text="key-2026-q1"/>
                <Button Grid.Row="2" Grid.Column="2" Content="生成密钥" Padding="12,2" Click="GenerateKey"/>
            </Grid>
        </GroupBox>

        <GroupBox Header="清单打包与签名" Grid.Row="2">
            <Grid Margin="8">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="120"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="8"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <TextBlock Text="payload目录" VerticalAlignment="Center"/>
                <TextBox x:Name="PayloadDir" Grid.Column="1" Margin="8,0"/>
                <Button Grid.Column="2" Content="浏览" Padding="12,2" Click="BrowseFolderPayload"/>

                <TextBlock Grid.Row="2" Text="输出目录" VerticalAlignment="Center"/>
                <TextBox x:Name="ManifestOutDir" Grid.Row="2" Grid.Column="1" Margin="8,0"/>
                <Button Grid.Row="2" Grid.Column="2" Content="浏览" Padding="12,2" Click="BrowseFolderManifestOut"/>

                <TextBlock Grid.Row="4" Text="私钥文件" VerticalAlignment="Center"/>
                <TextBox x:Name="PrivateKeyPath" Grid.Row="4" Grid.Column="1" Margin="8,0"/>
                <Button Grid.Row="4" Grid.Column="2" Content="选择" Padding="12,2" Click="BrowsePrivateKey"/>

                <TextBlock Grid.Row="6" Text="类型" VerticalAlignment="Center"/>
                <ComboBox x:Name="TypeBox" Grid.Row="6" Grid.Column="1" Margin="8,0">
                    <ComboBoxItem Content="app-update" IsSelected="True"/>
                    <ComboBoxItem Content="vhd-data"/>
                </ComboBox>

                <TextBlock Grid.Row="8" Text="最小版本" VerticalAlignment="Center"/>
                <TextBox x:Name="MinVersionBox" Grid.Row="8" Grid.Column="1" Margin="8,0" Text="1.2.0"/>

                <TextBlock Grid.Row="10" Text="版本" VerticalAlignment="Center"/>
                <TextBox x:Name="VersionBox" Grid.Row="10" Grid.Column="1" Margin="8,0"/>
                <Button Grid.Row="10" Grid.Column="2" Content="生成清单并签名" Padding="12,2" Click="MakeManifest"/>
            </Grid>
        </GroupBox>

        <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
            <TextBlock x:Name="StatusText" VerticalAlignment="Center" Margin="0,0,12,0"/>
            <Button Content="关闭" Padding="16,4" Width="100" Click="CloseApp"/>
        </StackPanel>
    </Grid>
    </Window>
